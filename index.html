<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perhitungan Insentif AB Peduli</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f9;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            background-color: #ffffff;
            padding: 30px 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
        }
        h1, h2 {
            text-align: center;
            color: #0056b3;
        }
        h1 {
            margin-bottom: 20px;
        }
        h2 {
            margin-top: 30px;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 10px;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            box-sizing: border-box;
            font-size: 16px;
        }
        button {
            width: 100%;
            padding: 15px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #0056b3;
        }
        .results {
            margin-top: 30px;
        }
        #hasil-perhitungan p {
            background-color: #e9f5ff;
            padding: 15px;
            border-left: 5px solid #007bff;
            margin: 10px 0;
            font-size: 16px;
        }
        #hasil-perhitungan strong {
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Perhitungan Insentif AB Peduli</h1>
        <div class="dashboard">
            <h2>Input Data</h2>
            <div class="input-group">
                <label for="danaAmil">Jumlah Dana Amil</label>
                <input type="number" id="danaAmil" placeholder="Masukkan jumlah dana amil">
            </div>
            <div class="input-group">
                <label for="persentaseInsentif">Persentase Dana Insentif (%)</label>
                <input type="number" id="persentaseInsentif" placeholder="Masukkan persentase">
            </div>
        </div>

        <div class="dashboard kpi-section">
            <h2>Input Pencapaian KPI BOD</h2>
            <div class="input-group">
                <label for="kpiDanaYoY">Realisasi Pertumbuhan Penghimpunan Dana (YoY) (%) <small>(Target: 25%)</small></label>
                <input type="number" id="kpiDanaYoY" placeholder="Masukkan realisasi %">
            </div>
            <div class="input-group">
                <label for="kpiBiayaOperasional">Realisasi Rasio Biaya Operasional (%) <small>(Target: 12.5% Maks)</small></label>
                <input type="number" id="kpiBiayaOperasional" placeholder="Masukkan realisasi %">
            </div>
            <div class="input-group">
                <label for="kpiWTP">Realisasi Opini Audit WTP <small>(Target: 1, 1=Ya, 0=Tidak)</small></label>
                <input type="number" id="kpiWTP" placeholder="Masukkan 1 atau 0">
            </div>
            <div class="input-group">
                <label for="kpiKepuasanDonatur">Realisasi Indeks Kepuasan Donatur <small>(Target: 8.5/10)</small></label>
                <input type="number" id="kpiKepuasanDonatur" placeholder="Masukkan nilai realisasi">
            </div>
            <div class="input-group">
                <label for="kpiProgramBaru">Realisasi Peluncuran Program Unggulan Baru <small>(Target: 2)</small></label>
                <input type="number" id="kpiProgramBaru" placeholder="Masukkan jumlah program">
            </div>
        </div>

        <div class="dashboard kpi-section">
            <h2>Input Pencapaian KPI DPS</h2>
            <div class="input-group">
                <label for="kpiAuditSyariah">Realisasi Laporan Audit Syariah <small>(Target: 1)</small></label>
                <input type="number" id="kpiAuditSyariah" placeholder="Jumlah laporan">
            </div>
            <div class="input-group">
                <label for="kpiTindakLanjut">Realisasi Tindak Lanjut Temuan Audit (%) <small>(Target: 100%)</small></label>
                <input type="number" id="kpiTindakLanjut" placeholder="Masukkan realisasi %">
            </div>
            <div class="input-group">
                <label for="kpiWaktuRespons">Realisasi Waktu Respons Opini Syariah (hari) <small>(Target: <= 14)</small></label>
                <input type="number" id="kpiWaktuRespons" placeholder="Masukkan jumlah hari">
            </div>
            <div class="input-group">
                <label for="kpiPersetujuanProduk">Realisasi Persetujuan Produk & Program <small>(Target: 1, 1=Ya, 0=Tidak)</small></label>
                <input type="number" id="kpiPersetujuanProduk" placeholder="Masukkan 1 atau 0">
            </div>
            <div class="input-group">
                <label for="kpiSesiEdukasi">Realisasi Sesi Edukasi Amil <small>(Target: 1)</small></label>
                <input type="number" id="kpiSesiEdukasi" placeholder="Jumlah sesi">
            </div>
            <div class="input-group">
                <label for="kpiKehadiranRapat">Realisasi Kehadiran Rapat Pleno (%) <small>(Target: > 90%)</small></label>
                <input type="number" id="kpiKehadiranRapat" placeholder="Masukkan realisasi %">
            </div>
        </div>

        <button id="hitung" style="margin-top: 20px;">Hitung Semua</button>

        <div class="results">
            <h2>Hasil Perhitungan</h2>
            <div id="hasil-perhitungan">
                <!-- Hasil akan ditampilkan di sini -->
            </div>
        </div>
    </div>

    <script>
        document.getElementById('hitung').addEventListener('click', function() {
            const danaAmil = parseFloat(document.getElementById('danaAmil').value);
            const persentaseInsentif = parseFloat(document.getElementById('persentaseInsentif').value);

            if (isNaN(danaAmil) || isNaN(persentaseInsentif)) {
                alert("Harap masukkan nilai yang valid untuk kedua input.");
                return;
            }

            const danaInsentif = (persentaseInsentif / 100) * danaAmil;

            // Perhitungan Insentif Kinerja Lembaga (IKL)
            const totalBudgetIKL = danaInsentif * 0.40;
            const nilaiPerPoin = totalBudgetIKL / 30;
            const insentifDPS_awal = nilaiPerPoin * 4;
            const insentifBOD_awal = nilaiPerPoin * 6;

            // Ambil nilai realisasi KPI BOD
            const realisasiDanaYoY = parseFloat(document.getElementById('kpiDanaYoY').value);
            const realisasiBiayaOperasional = parseFloat(document.getElementById('kpiBiayaOperasional').value);
            const realisasiWTP = parseFloat(document.getElementById('kpiWTP').value);
            const realisasiKepuasanDonatur = parseFloat(document.getElementById('kpiKepuasanDonatur').value);
            const realisasiProgramBaru = parseFloat(document.getElementById('kpiProgramBaru').value);
            
            // Ambil nilai realisasi KPI DPS
            const realisasiAuditSyariah = parseFloat(document.getElementById('kpiAuditSyariah').value);
            const realisasiTindakLanjut = parseFloat(document.getElementById('kpiTindakLanjut').value);
            const realisasiWaktuRespons = parseFloat(document.getElementById('kpiWaktuRespons').value);
            const realisasiPersetujuanProduk = parseFloat(document.getElementById('kpiPersetujuanProduk').value);
            const realisasiSesiEdukasi = parseFloat(document.getElementById('kpiSesiEdukasi').value);
            const realisasiKehadiranRapat = parseFloat(document.getElementById('kpiKehadiranRapat').value);

            const kpiInputs = [
                realisasiDanaYoY, realisasiBiayaOperasional, realisasiWTP, realisasiKepuasanDonatur, realisasiProgramBaru,
                realisasiAuditSyariah, realisasiTindakLanjut, realisasiWaktuRespons, realisasiPersetujuanProduk, realisasiSesiEdukasi, realisasiKehadiranRapat
            ];
            if (kpiInputs.some(isNaN)) {
                alert("Harap isi semua field KPI dengan nilai yang valid.");
                return;
            }

            // Hitung persentase pencapaian KPI BOD
            const pencapaianDanaYoY = (realisasiDanaYoY / 25);
            const pencapaianBiayaOperasional = (1 + (12.5 - realisasiBiayaOperasional) / 12.5);
            const pencapaianWTP = (realisasiWTP / 1);
            const pencapaianKepuasanDonatur = (realisasiKepuasanDonatur / 8.5);
            const pencapaianProgramBaru = (realisasiProgramBaru / 2);
            const totalPencapaianBOD = pencapaianDanaYoY + pencapaianBiayaOperasional + pencapaianWTP + pencapaianKepuasanDonatur + pencapaianProgramBaru;
            const rataRataPencapaianKPI_BOD = (totalPencapaianBOD / 5);
            const insentifBOD_final = insentifBOD_awal * rataRataPencapaianKPI_BOD;

            // Hitung persentase pencapaian KPI DPS
            const pencapaianAuditSyariah = (realisasiAuditSyariah / 1);
            const pencapaianTindakLanjut = (realisasiTindakLanjut / 100);
            const pencapaianWaktuRespons = (1 + (14 - realisasiWaktuRespons) / 14);
            const pencapaianPersetujuanProduk = (realisasiPersetujuanProduk / 1);
            const pencapaianSesiEdukasi = (realisasiSesiEdukasi / 1);
            const pencapaianKehadiranRapat = (realisasiKehadiranRapat / 90);
            const totalPencapaianDPS = pencapaianAuditSyariah + pencapaianTindakLanjut + pencapaianWaktuRespons + pencapaianPersetujuanProduk + pencapaianSesiEdukasi + pencapaianKehadiranRapat;
            const rataRataPencapaianKPI_DPS = (totalPencapaianDPS / 6);
            const insentifDPS_final = insentifDPS_awal * rataRataPencapaianKPI_DPS;

            const hasilDiv = document.getElementById('hasil-perhitungan');
            hasilDiv.innerHTML = `
                <p><strong>Total Budget Insentif IKL:</strong> ${formatRupiah(totalBudgetIKL)}</p>
                <p><strong>Nilai per Poin:</strong> ${formatRupiah(nilaiPerPoin)}</p>
                <p><strong>Insentif IKL Awal untuk DPS:</strong> ${formatRupiah(insentifDPS_awal)}</p>
                <p><strong>Insentif IKL Awal untuk BOD:</strong> ${formatRupiah(insentifBOD_awal)}</p>
                <hr>
                <h3 style="text-align:center; color: #0056b3; margin-bottom: 15px;">Realisasi Insentif Final</h3>
                <p><strong>Rata-rata Pencapaian KPI BOD:</strong> ${(rataRataPencapaianKPI_BOD * 100).toFixed(2)}%</p>
                <p><strong>Realisasi Insentif IKL Final untuk BOD:</strong> ${formatRupiah(insentifBOD_awal)} x ${(rataRataPencapaianKPI_BOD * 100).toFixed(2)}% = <strong>${formatRupiah(insentifBOD_final)}</strong></p>
                <p><strong>Rata-rata Pencapaian KPI DPS:</strong> ${(rataRataPencapaianKPI_DPS * 100).toFixed(2)}%</p>
                <p><strong>Realisasi Insentif IKL Final untuk DPS:</strong> ${formatRupiah(insentifDPS_awal)} x ${(rataRataPencapaianKPI_DPS * 100).toFixed(2)}% = <strong>${formatRupiah(insentifDPS_final)}</strong></p>
            `;
        });

        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(angka);
        }
    </script>
</body>
</html>